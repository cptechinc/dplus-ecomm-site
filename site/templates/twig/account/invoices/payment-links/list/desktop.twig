{% import "util/macros/html.twig" as html %}

<div class="list-group link-list">
	<div class="list-group-item bg-light h4 mb-0">
		{% block header %}
			<div class="row">
				<div class="col-2">
					<a href="{{ input.sortUrl('timestamp') }}" class="link sort">Date
						{% if input.get.text('orderBy') == 'timestamp'  %}
							{{ html.iconTypeSort({'type': 'sort-numeric', 'direction' : input.get.text('sortDir')}) }}
						{% endif %}
					</a>
				</div>
				<div class="col-2">Time</div>
				<div class="col-2">
					<a href="{{ input.sortUrl('ordn') }}" class="link sort">Invoice # 
						{% if input.get.text('orderBy') == 'ordnr'  %}
							{{ html.iconTypeSort({'type': 'sort-numeric', 'direction' : input.get.text('sortDir')}) }}
						{% endif %}
					</a>
				</div>
				<div class="col-6">Actions</div>
			</div>
		{% endblock %}
	</div>
	
	{% block results %}
		{% if results.count() == 0 %}
			<div class="list-group-item bg-light">
				<div class="text-center">There are no results to display.</div>
			</div>
		{% endif %}
		
		{% for link in results %}
			<div class="list-group-item {{ browseragent.isMobile() ? 'py-2' : 'py-1' }}">
				{% block result_layout %}
					<div class="row">
						<div class="col-2">{{ link.timestamp|convertdate }}</div>
						<div class="col-2">{{ link.timestamp|convertdate('h:i A') }}</div>
						<div class="col-2">{{ link.ordn }}</div>
						<div class="col-6">
							<a href="{{ link.url }}" target="_blank" class="btn btn-sm {{ CSS.colors.buttons.getClass('link') }}">
								$ Pay
							</a>
							&nbsp;
							{% if page.orderExists(link.ordn) %}
								<a href="{{ page.orderUrl(link.ordn) }}" class="btn btn-sm {{ CSS.colors.buttons.getClass('link') }}" target="_blank">
									View Order
								</a>
							{% endif %}
						</div>
					</div>
				{% endblock %}
			</div>
		{% endfor %}
	{% endblock %}
</div>
